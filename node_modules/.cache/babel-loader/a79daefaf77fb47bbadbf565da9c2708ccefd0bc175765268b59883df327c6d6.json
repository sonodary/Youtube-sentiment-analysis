{"ast":null,"code":"import _slicedToArray from \"/Users/sonodaryuuichirou/Desktop/practice/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport React, { useEffect, useRef } from 'react';\nimport MutateObserver from '@rc-component/mutate-observer';\nimport classNames from 'classnames';\nimport theme from '../theme';\nimport useClips, { FontGap } from './useClips';\nimport { getPixelRatio, getStyleStr, reRendering } from './utils';\nvar Watermark = function Watermark(props) {\n  var _a, _b;\n  var _props$zIndex = props.zIndex,\n    zIndex = _props$zIndex === void 0 ? 9 : _props$zIndex,\n    _props$rotate = props.rotate,\n    rotate = _props$rotate === void 0 ? -22 : _props$rotate,\n    width = props.width,\n    height = props.height,\n    image = props.image,\n    content = props.content,\n    _props$font = props.font,\n    font = _props$font === void 0 ? {} : _props$font,\n    style = props.style,\n    className = props.className,\n    rootClassName = props.rootClassName,\n    _props$gap = props.gap,\n    gap = _props$gap === void 0 ? [100, 100] : _props$gap,\n    offset = props.offset,\n    children = props.children;\n  var _theme$useToken = theme.useToken(),\n    token = _theme$useToken.token;\n  var _font$color = font.color,\n    color = _font$color === void 0 ? token.colorFill : _font$color,\n    _font$fontSize = font.fontSize,\n    fontSize = _font$fontSize === void 0 ? token.fontSizeLG : _font$fontSize,\n    _font$fontWeight = font.fontWeight,\n    fontWeight = _font$fontWeight === void 0 ? 'normal' : _font$fontWeight,\n    _font$fontStyle = font.fontStyle,\n    fontStyle = _font$fontStyle === void 0 ? 'normal' : _font$fontStyle,\n    _font$fontFamily = font.fontFamily,\n    fontFamily = _font$fontFamily === void 0 ? 'sans-serif' : _font$fontFamily;\n  var _gap = _slicedToArray(gap, 2),\n    gapX = _gap[0],\n    gapY = _gap[1];\n  var gapXCenter = gapX / 2;\n  var gapYCenter = gapY / 2;\n  var offsetLeft = (_a = offset === null || offset === void 0 ? void 0 : offset[0]) !== null && _a !== void 0 ? _a : gapXCenter;\n  var offsetTop = (_b = offset === null || offset === void 0 ? void 0 : offset[1]) !== null && _b !== void 0 ? _b : gapYCenter;\n  var getMarkStyle = function getMarkStyle() {\n    var markStyle = {\n      zIndex: zIndex,\n      position: 'absolute',\n      left: 0,\n      top: 0,\n      width: '100%',\n      height: '100%',\n      pointerEvents: 'none',\n      backgroundRepeat: 'repeat'\n    };\n    /** Calculate the style of the offset */\n    var positionLeft = offsetLeft - gapXCenter;\n    var positionTop = offsetTop - gapYCenter;\n    if (positionLeft > 0) {\n      markStyle.left = \"\".concat(positionLeft, \"px\");\n      markStyle.width = \"calc(100% - \".concat(positionLeft, \"px)\");\n      positionLeft = 0;\n    }\n    if (positionTop > 0) {\n      markStyle.top = \"\".concat(positionTop, \"px\");\n      markStyle.height = \"calc(100% - \".concat(positionTop, \"px)\");\n      positionTop = 0;\n    }\n    markStyle.backgroundPosition = \"\".concat(positionLeft, \"px \").concat(positionTop, \"px\");\n    return markStyle;\n  };\n  var containerRef = useRef(null);\n  var watermarkRef = useRef();\n  var stopObservation = useRef(false);\n  var destroyWatermark = function destroyWatermark() {\n    if (watermarkRef.current) {\n      watermarkRef.current.remove();\n      watermarkRef.current = undefined;\n    }\n  };\n  var appendWatermark = function appendWatermark(base64Url, markWidth) {\n    var _a;\n    if (containerRef.current && watermarkRef.current) {\n      stopObservation.current = true;\n      watermarkRef.current.setAttribute('style', getStyleStr(Object.assign(Object.assign({}, getMarkStyle()), {\n        backgroundImage: \"url('\".concat(base64Url, \"')\"),\n        backgroundSize: \"\".concat(Math.floor(markWidth), \"px\")\n      })));\n      (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.append(watermarkRef.current);\n      // Delayed execution\n      setTimeout(function () {\n        stopObservation.current = false;\n      });\n    }\n  };\n  /**\n   * Get the width and height of the watermark. The default values are as follows\n   * Image: [120, 64]; Content: It's calculated by content;\n   */\n  var getMarkSize = function getMarkSize(ctx) {\n    var defaultWidth = 120;\n    var defaultHeight = 64;\n    if (!image && ctx.measureText) {\n      ctx.font = \"\".concat(Number(fontSize), \"px \").concat(fontFamily);\n      var contents = Array.isArray(content) ? content : [content];\n      var sizes = contents.map(function (item) {\n        var metrics = ctx.measureText(item);\n        return [metrics.width, metrics.fontBoundingBoxAscent + metrics.fontBoundingBoxDescent];\n      });\n      defaultWidth = Math.ceil(Math.max.apply(Math, _toConsumableArray(sizes.map(function (size) {\n        return size[0];\n      }))));\n      defaultHeight = Math.ceil(Math.max.apply(Math, _toConsumableArray(sizes.map(function (size) {\n        return size[1];\n      })))) * contents.length + (contents.length - 1) * FontGap;\n    }\n    return [width !== null && width !== void 0 ? width : defaultWidth, height !== null && height !== void 0 ? height : defaultHeight];\n  };\n  var getClips = useClips();\n  var renderWatermark = function renderWatermark() {\n    var canvas = document.createElement('canvas');\n    var ctx = canvas.getContext('2d');\n    if (ctx) {\n      if (!watermarkRef.current) {\n        watermarkRef.current = document.createElement('div');\n      }\n      var ratio = getPixelRatio();\n      var _getMarkSize = getMarkSize(ctx),\n        _getMarkSize2 = _slicedToArray(_getMarkSize, 2),\n        markWidth = _getMarkSize2[0],\n        markHeight = _getMarkSize2[1];\n      var drawCanvas = function drawCanvas(drawContent) {\n        var _getClips = getClips(drawContent || '', rotate, ratio, markWidth, markHeight, {\n            color: color,\n            fontSize: fontSize,\n            fontStyle: fontStyle,\n            fontWeight: fontWeight,\n            fontFamily: fontFamily\n          }, gapX, gapY),\n          _getClips2 = _slicedToArray(_getClips, 2),\n          textClips = _getClips2[0],\n          clipWidth = _getClips2[1];\n        appendWatermark(textClips, clipWidth);\n      };\n      if (image) {\n        var img = new Image();\n        img.onload = function () {\n          drawCanvas(img);\n        };\n        img.onerror = function () {\n          drawCanvas(content);\n        };\n        img.crossOrigin = 'anonymous';\n        img.referrerPolicy = 'no-referrer';\n        img.src = image;\n      } else {\n        drawCanvas(content);\n      }\n    }\n  };\n  var onMutate = function onMutate(mutations) {\n    if (stopObservation.current) {\n      return;\n    }\n    mutations.forEach(function (mutation) {\n      if (reRendering(mutation, watermarkRef.current)) {\n        destroyWatermark();\n        renderWatermark();\n      }\n    });\n  };\n  useEffect(renderWatermark, [rotate, zIndex, width, height, image, content, color, fontSize, fontWeight, fontStyle, fontFamily, gapX, gapY, offsetLeft, offsetTop]);\n  return /*#__PURE__*/React.createElement(MutateObserver, {\n    onMutate: onMutate\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    ref: containerRef,\n    className: classNames(className, rootClassName),\n    style: Object.assign({\n      position: 'relative'\n    }, style)\n  }, children));\n};\nif (process.env.NODE_ENV !== 'production') {\n  Watermark.displayName = 'Watermark';\n}\nexport default Watermark;","map":{"version":3,"names":["_toConsumableArray","React","useEffect","useRef","MutateObserver","classNames","theme","useClips","FontGap","getPixelRatio","getStyleStr","reRendering","Watermark","props","_a","_b","_props$zIndex","zIndex","_props$rotate","rotate","width","height","image","content","_props$font","font","style","className","rootClassName","_props$gap","gap","offset","children","_theme$useToken","useToken","token","_font$color","color","colorFill","_font$fontSize","fontSize","fontSizeLG","_font$fontWeight","fontWeight","_font$fontStyle","fontStyle","_font$fontFamily","fontFamily","_gap","_slicedToArray","gapX","gapY","gapXCenter","gapYCenter","offsetLeft","offsetTop","getMarkStyle","markStyle","position","left","top","pointerEvents","backgroundRepeat","positionLeft","positionTop","concat","backgroundPosition","containerRef","watermarkRef","stopObservation","destroyWatermark","current","remove","undefined","appendWatermark","base64Url","markWidth","setAttribute","Object","assign","backgroundImage","backgroundSize","Math","floor","append","setTimeout","getMarkSize","ctx","defaultWidth","defaultHeight","measureText","Number","contents","Array","isArray","sizes","map","item","metrics","fontBoundingBoxAscent","fontBoundingBoxDescent","ceil","max","apply","size","length","getClips","renderWatermark","canvas","document","createElement","getContext","ratio","_getMarkSize","_getMarkSize2","markHeight","drawCanvas","drawContent","_getClips","_getClips2","textClips","clipWidth","img","Image","onload","onerror","crossOrigin","referrerPolicy","src","onMutate","mutations","forEach","mutation","ref","process","env","NODE_ENV","displayName"],"sources":["/Users/sonodaryuuichirou/Desktop/practice/node_modules/antd/es/watermark/index.js"],"sourcesContent":["import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport React, { useEffect, useRef } from 'react';\nimport MutateObserver from '@rc-component/mutate-observer';\nimport classNames from 'classnames';\nimport theme from '../theme';\nimport useClips, { FontGap } from './useClips';\nimport { getPixelRatio, getStyleStr, reRendering } from './utils';\nconst Watermark = props => {\n  var _a, _b;\n  const {\n    /**\n     * The antd content layer zIndex is basically below 10\n     * https://github.com/ant-design/ant-design/blob/6192403b2ce517c017f9e58a32d58774921c10cd/components/style/themes/default.less#L335\n     */\n    zIndex = 9,\n    rotate = -22,\n    width,\n    height,\n    image,\n    content,\n    font = {},\n    style,\n    className,\n    rootClassName,\n    gap = [100, 100],\n    offset,\n    children\n  } = props;\n  const {\n    token\n  } = theme.useToken();\n  const {\n    color = token.colorFill,\n    fontSize = token.fontSizeLG,\n    fontWeight = 'normal',\n    fontStyle = 'normal',\n    fontFamily = 'sans-serif'\n  } = font;\n  const [gapX, gapY] = gap;\n  const gapXCenter = gapX / 2;\n  const gapYCenter = gapY / 2;\n  const offsetLeft = (_a = offset === null || offset === void 0 ? void 0 : offset[0]) !== null && _a !== void 0 ? _a : gapXCenter;\n  const offsetTop = (_b = offset === null || offset === void 0 ? void 0 : offset[1]) !== null && _b !== void 0 ? _b : gapYCenter;\n  const getMarkStyle = () => {\n    const markStyle = {\n      zIndex,\n      position: 'absolute',\n      left: 0,\n      top: 0,\n      width: '100%',\n      height: '100%',\n      pointerEvents: 'none',\n      backgroundRepeat: 'repeat'\n    };\n    /** Calculate the style of the offset */\n    let positionLeft = offsetLeft - gapXCenter;\n    let positionTop = offsetTop - gapYCenter;\n    if (positionLeft > 0) {\n      markStyle.left = `${positionLeft}px`;\n      markStyle.width = `calc(100% - ${positionLeft}px)`;\n      positionLeft = 0;\n    }\n    if (positionTop > 0) {\n      markStyle.top = `${positionTop}px`;\n      markStyle.height = `calc(100% - ${positionTop}px)`;\n      positionTop = 0;\n    }\n    markStyle.backgroundPosition = `${positionLeft}px ${positionTop}px`;\n    return markStyle;\n  };\n  const containerRef = useRef(null);\n  const watermarkRef = useRef();\n  const stopObservation = useRef(false);\n  const destroyWatermark = () => {\n    if (watermarkRef.current) {\n      watermarkRef.current.remove();\n      watermarkRef.current = undefined;\n    }\n  };\n  const appendWatermark = (base64Url, markWidth) => {\n    var _a;\n    if (containerRef.current && watermarkRef.current) {\n      stopObservation.current = true;\n      watermarkRef.current.setAttribute('style', getStyleStr(Object.assign(Object.assign({}, getMarkStyle()), {\n        backgroundImage: `url('${base64Url}')`,\n        backgroundSize: `${Math.floor(markWidth)}px`\n      })));\n      (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.append(watermarkRef.current);\n      // Delayed execution\n      setTimeout(() => {\n        stopObservation.current = false;\n      });\n    }\n  };\n  /**\n   * Get the width and height of the watermark. The default values are as follows\n   * Image: [120, 64]; Content: It's calculated by content;\n   */\n  const getMarkSize = ctx => {\n    let defaultWidth = 120;\n    let defaultHeight = 64;\n    if (!image && ctx.measureText) {\n      ctx.font = `${Number(fontSize)}px ${fontFamily}`;\n      const contents = Array.isArray(content) ? content : [content];\n      const sizes = contents.map(item => {\n        const metrics = ctx.measureText(item);\n        return [metrics.width, metrics.fontBoundingBoxAscent + metrics.fontBoundingBoxDescent];\n      });\n      defaultWidth = Math.ceil(Math.max.apply(Math, _toConsumableArray(sizes.map(size => size[0]))));\n      defaultHeight = Math.ceil(Math.max.apply(Math, _toConsumableArray(sizes.map(size => size[1])))) * contents.length + (contents.length - 1) * FontGap;\n    }\n    return [width !== null && width !== void 0 ? width : defaultWidth, height !== null && height !== void 0 ? height : defaultHeight];\n  };\n  const getClips = useClips();\n  const renderWatermark = () => {\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    if (ctx) {\n      if (!watermarkRef.current) {\n        watermarkRef.current = document.createElement('div');\n      }\n      const ratio = getPixelRatio();\n      const [markWidth, markHeight] = getMarkSize(ctx);\n      const drawCanvas = drawContent => {\n        const [textClips, clipWidth] = getClips(drawContent || '', rotate, ratio, markWidth, markHeight, {\n          color,\n          fontSize,\n          fontStyle,\n          fontWeight,\n          fontFamily\n        }, gapX, gapY);\n        appendWatermark(textClips, clipWidth);\n      };\n      if (image) {\n        const img = new Image();\n        img.onload = () => {\n          drawCanvas(img);\n        };\n        img.onerror = () => {\n          drawCanvas(content);\n        };\n        img.crossOrigin = 'anonymous';\n        img.referrerPolicy = 'no-referrer';\n        img.src = image;\n      } else {\n        drawCanvas(content);\n      }\n    }\n  };\n  const onMutate = mutations => {\n    if (stopObservation.current) {\n      return;\n    }\n    mutations.forEach(mutation => {\n      if (reRendering(mutation, watermarkRef.current)) {\n        destroyWatermark();\n        renderWatermark();\n      }\n    });\n  };\n  useEffect(renderWatermark, [rotate, zIndex, width, height, image, content, color, fontSize, fontWeight, fontStyle, fontFamily, gapX, gapY, offsetLeft, offsetTop]);\n  return /*#__PURE__*/React.createElement(MutateObserver, {\n    onMutate: onMutate\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    ref: containerRef,\n    className: classNames(className, rootClassName),\n    style: Object.assign({\n      position: 'relative'\n    }, style)\n  }, children));\n};\nif (process.env.NODE_ENV !== 'production') {\n  Watermark.displayName = 'Watermark';\n}\nexport default Watermark;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}